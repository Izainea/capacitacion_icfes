<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lección 5.1: El Modelo como Artefacto</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Teko:wght@400;600&display=swap" rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --primary-color: #ff9900; /* AWS Orange */
            --secondary-color: #232f3e; /* AWS Dark Blue */
            --text-color: #e0e0e0;
            --text-muted: #a0a0a0;
            --border-color: #333;
            --success-color: #28a745;
            --info-color: #5dade2;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 40px 20px;
            text-align: center;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: auto;
        }

        h1, h2, h3 {
            font-family: 'Teko', sans-serif;
            font-weight: 600;
            letter-spacing: 1px;
        }

        h1 {
            font-size: 4.5rem;
            color: var(--primary-color);
            margin-bottom: 0;
        }
        
        h2 {
            font-size: 3rem;
            color: var(--text-color);
            border-bottom: 2px solid var(--primary-color);
            display: inline-block;
            padding-bottom: 10px;
            margin-top: 80px;
        }

        .subtitle {
            font-size: 1.6rem;
            color: var(--text-muted);
            margin-top: 0;
            margin-bottom: 80px;
        }

        .section {
            margin-bottom: 100px;
        }

        p {
            font-size: 1.2rem;
            line-height: 1.7;
            color: var(--text-muted);
            max-width: 800px;
            margin: 20px auto 40px;
            text-align: left;
        }
        .center-p {
             text-align: center;
        }
        
        pre {
            background-color: #0d1117;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            text-align: left;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1rem;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #c9d1d9;
        }
        
        .code-block-title {
            text-align: left;
            font-family: 'Roboto', sans-serif;
            font-weight: bold;
            font-size: 1.2rem;
            margin: 30px 0 -10px 0;
            padding: 5px 15px;
            border-radius: 5px 5px 0 0;
            display: inline-block;
            color: white;
        }

        .data-scientist-title { background-color: var(--info-color); }
        .shiny-dev-title { background-color: var(--success-color); }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        .feature-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid var(--info-color);
            text-align: left;
        }
        .feature-card .icon { font-size: 2rem; color: var(--info-color); margin-bottom: 15px; }
        .feature-card h3 { font-size: 1.6rem; color: var(--text-color); margin: 0 0 10px 0; }
        .feature-card p { font-size: 1rem; line-height: 1.6; margin: 0; }

        .workflow-block {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: left;
        }
        .workflow-block h3 {
            font-size: 2rem;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .data-scientist-block { border-left: 4px solid var(--info-color); }
        .data-scientist-block h3 { color: var(--info-color); }
        .shiny-dev-block { border-left: 4px solid var(--success-color); }
        .shiny-dev-block h3 { color: var(--success-color); }
        .workflow-block ol { font-size: 1.1rem; line-height: 1.8; }
        .workflow-block b { color: var(--text-color); }

        .navigation-section {
            background: var(--secondary-color); padding: 60px 30px; border-radius: 15px; margin-top: 80px;
        }
        .navigation-section h2 { border: none; }
        .nav-buttons {
            display: flex; justify-content: center; gap: 20px; margin-top: 30px; flex-wrap: wrap;
        }
        .nav-button {
            padding: 15px 30px; border: none; border-radius: 50px; font-size: 1.2rem; font-weight: bold; text-decoration: none;
            transition: transform 0.3s, box-shadow 0.3s; display: inline-flex; align-items: center; gap: 10px; cursor: pointer;
        }
        .back-button {
            background-color: var(--card-bg); color: var(--primary-color); border: 2px solid var(--primary-color);
        }
        .next-button {
            background-color: var(--primary-color); color: var(--secondary-color);
        }
        .nav-button:hover {
            transform: scale(1.05); box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>

    <div class="container">

        <header>
            <h1>El Modelo como Artefacto</h1>
            <p class="subtitle center-p">Separando la "Fábrica" de la "Tienda": El Pilar del Despliegue Robusto.</p>
        </header>

        <main>
            <section class="section" id="introduccion">
                <h2>La Analogía: La Fábrica y la Tienda</h2>
                <p>
                    En un flujo MLOps maduro, el entrenamiento de modelos y el desarrollo de aplicaciones son dos procesos <b>completamente separados</b>. Imagina que intentas construir el motor de un coche dentro del concesionario mientras los clientes esperan. Sería un caos: ruidoso, lento y poco profesional.
                </p>
                <p>
                    La solución es simple: hay una <b>fábrica</b> (el entorno del científico de datos) que se especializa en construir motores (modelos) de alta calidad. El resultado de su trabajo es un producto terminado y empaquetado (un archivo `.rds`). Luego, está la <b>tienda</b> (la aplicación Shiny), cuyo único trabajo es tomar ese motor, instalarlo en un chasis elegante (la UI) y presentárselo al cliente.
                </p>
            </section>
            
            <section class="section" id="artefacto">
                <h2>¿Qué es un Artefacto de Modelo?</h2>
                <p>
                    Un artefacto de modelo es simplemente un archivo que encapsula toda la lógica y los parámetros aprendidos durante el entrenamiento. Es un "snapshot" del cerebro del modelo, listo para ser cargado y utilizado para hacer predicciones sobre datos nuevos. En R, la forma más común y robusta de crear este artefacto es usando la función `saveRDS()`.
                </p>
                
                <h3 class="code-block-title data-scientist-title">Lado del Científico de Datos: "La Fábrica"</h3>
                <pre><code># Este es el script R/model_training.R
# ... (código para cargar librerías y datos crudos) ...

# Se entrena el modelo
modelo_puntaje <- lm(
  punt_matematicas ~ punt_lectura_critica + punt_sociales_ciudadanas + punt_c_naturales,
  data = datos_crudos
)

# Se guarda el "producto final" en la carpeta de modelos
saveRDS(modelo_puntaje, "models/modelo_puntaje_mat.rds")</code></pre>
                
                <h3 class="code-block-title shiny-dev-title">Lado del Desarrollador Shiny: "La Tienda"</h3>
                <pre><code># Este código va en el global.R de la aplicación
# La app carga el producto terminado, listo para usar
modelo_matematicas <- readRDS("models/modelo_puntaje_mat.rds")

# Ahora la app puede usarlo para hacer predicciones
nuevos_datos <- data.frame(
    punt_lectura_critica = 80,
    punt_sociales_ciudadanas = 75,
    punt_c_naturales = 70
)
predict(modelo_matematicas, newdata = nuevos_datos)</code></pre>
            </section>

            <section class="section" id="beneficios">
                <h2>Los Beneficios Clave del Desacoplamiento</h2>
                 <p class="center-p">Separar la "fábrica" de la "tienda" no es solo una buena práctica; es la base para un sistema MLOps robusto y escalable.</p>
                <div class="card-grid">
                    <div class="feature-card">
                        <div class="icon"><i class="fa-solid fa-gauge-high"></i></div>
                        <h3>Rendimiento</h3>
                        <p>El entrenamiento puede tardar minutos u horas. Una aplicación web debe cargar en segundos. Desacoplar asegura que la app solo realice una operación de carga rápida, no el costoso proceso de entrenamiento.</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fa-solid fa-repeat"></i></div>
                        <h3>Reproducibilidad y Versionado</h3>
                        <p>El artefacto `.rds` es un archivo que se versiona con Git, al igual que el código. Esto nos da trazabilidad total: siempre sabemos qué versión del código generó qué versión del modelo.</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fa-solid fa-users"></i></div>
                        <h3>Colaboración</h3>
                        <p>Permite que los científicos de datos (expertos en modelos) y los desarrolladores Shiny (expertos en UI/UX) trabajen en paralelo. Cada uno se enfoca en su especialidad sin interferir con el otro.</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fa-solid fa-shield-halved"></i></div>
                        <h3>Seguridad y Simplicidad</h3>
                        <p>La aplicación Shiny no necesita acceso a los datos de entrenamiento crudos, ni a las complejas librerías de entrenamiento. Su única dependencia es el archivo final del modelo, simplificando su entorno y reduciendo riesgos de seguridad.</p>
                    </div>
                </div>
            </section>

            <section class="section" id="flujo-trabajo">
                <h2>El Flujo de Trabajo en la Práctica con Git</h2>
                <p class="center-p">Así es como esta separación se ve en un flujo de trabajo colaborativo real usando Git.</p>

                <div class="workflow-block data-scientist-block">
                    <h3><i class="fa-solid fa-flask"></i> Rol: Científico de Datos</h3>
                    <ol>
                        <li>Trabaja en una rama de Git (`feature/nuevo-modelo-v2`).</li>
                        <li>Escribe y perfecciona el script `R/model_training.R`.</li>
                        <li>Su objetivo es producir el archivo `models/modelo_v2.rds`.</li>
                        <li>Una vez satisfecho, hace commit de <b>ambos archivos</b> (el script y el `.rds`) y los sube al repositorio.</li>
                    </ol>
                </div>

                <div class="workflow-block shiny-dev-block">
                    <h3><i class="fa-solid fa-palette"></i> Rol: Desarrollador Shiny</h3>
                    <ol>
                        <li>Trabaja en otra rama de Git (`feature/integrar-modelo-v2`).</li>
                        <li>Hace `git pull` para obtener el nuevo artefacto `modelo_v2.rds` que el científico de datos subió.</li>
                        <li>Modifica el `global.R` para que ahora cargue el nuevo modelo: `readRDS("models/modelo_v2.rds")`.</li>
                        <li>La aplicación ahora usa la nueva lógica predictiva. Es importante destacar que el desarrollador Shiny <b>nunca ejecuta el script de entrenamiento</b>. Solo consume su resultado (el artefacto).</li>
                    </ol>
                </div>
            </section>

            <section class="section navigation-section">
                <h2>¿Qué Sigue?</h2>
                <p class="center-p">Ahora que entendemos la teoría y la importancia de tratar el modelo como un artefacto, en la siguiente lección pondremos manos a la obra. Crearemos nuestro propio script de inferencia para encapsular esta lógica.</p>
                <div class="nav-buttons">
                    <a href="sesion_5.html" class="nav-button back-button"><i class="fa-solid fa-arrow-left"></i> Volver al Módulo 5</a>
                    <a href="artefacto_inferencia.html" class="nav-button next-button">Siguiente: Taller de Inferencia <i class="fa-solid fa-arrow-right"></i></a>
                </div>
            </section>
        </main>
    </div>

</body>
</html>

